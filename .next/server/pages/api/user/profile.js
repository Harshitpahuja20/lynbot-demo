"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/profile";
exports.ids = ["pages/api/user/profile"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fprofile&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cprofile.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fprofile&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cprofile.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_profile_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\profile.ts */ \"(api)/./pages/api/user/profile.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_profile_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_profile_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/profile\",\n        pathname: \"/api/user/profile\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_user_profile_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZwcm9maWxlJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUN1c2VyJTVDcHJvZmlsZS50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMyRDtBQUMzRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsdURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHVEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2x5bmNib3QtbmV4dGpzLz80Mjc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdXNlclxcXFxwcm9maWxlLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlci9wcm9maWxlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlci9wcm9maWxlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fprofile&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cprofile.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   getSupabaseAdminClient: () => (/* binding */ getSupabaseAdminClient),\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// Client instances (lazy initialization)\nlet _supabase = null;\nlet _supabaseAdmin = null;\nfunction getSupabaseClient() {\n    if (!_supabase) {\n        const supabaseUrl = \"https://djqtqxnvgjjeeazwnyqn.supabase.co\";\n        const supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqcXRxeG52Z2pqZWVhendueXFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NjM4OTUsImV4cCI6MjA3NzEzOTg5NX0.zQZax1gQYZSUc30y5iGscT7J9wjVQQCZODuUrc6hPzw\";\n        if (!supabaseUrl || !supabaseAnonKey) {\n            console.warn(\"Supabase environment variables not found. Please configure Supabase integration.\");\n            // Return a mock client that won't cause errors\n            return {\n                from: ()=>({\n                        select: ()=>Promise.resolve({\n                                data: [],\n                                error: null\n                            }),\n                        insert: ()=>Promise.resolve({\n                                data: null,\n                                error: {\n                                    message: \"Supabase not configured\"\n                                }\n                            }),\n                        update: ()=>Promise.resolve({\n                                data: null,\n                                error: {\n                                    message: \"Supabase not configured\"\n                                }\n                            }),\n                        delete: ()=>Promise.resolve({\n                                data: null,\n                                error: {\n                                    message: \"Supabase not configured\"\n                                }\n                            })\n                    })\n            };\n        }\n        _supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    }\n    return _supabase;\n}\nfunction getSupabaseAdminClient() {\n    if (!_supabaseAdmin) {\n        const supabaseUrl = \"https://djqtqxnvgjjeeazwnyqn.supabase.co\";\n        const supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n        if (!supabaseUrl || !supabaseServiceRoleKey) {\n            console.warn(\"Supabase admin environment variables not found. Please configure Supabase integration.\");\n            // Return a mock client that won't cause errors\n            return {\n                from: ()=>({\n                        select: ()=>Promise.resolve({\n                                data: [],\n                                error: null\n                            }),\n                        insert: ()=>Promise.resolve({\n                                data: null,\n                                error: {\n                                    message: \"Supabase not configured\"\n                                }\n                            }),\n                        update: ()=>Promise.resolve({\n                                data: null,\n                                error: {\n                                    message: \"Supabase not configured\"\n                                }\n                            }),\n                        delete: ()=>Promise.resolve({\n                                data: null,\n                                error: {\n                                    message: \"Supabase not configured\"\n                                }\n                            })\n                    })\n            };\n        }\n        _supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRoleKey);\n    }\n    return _supabaseAdmin;\n}\n// Export lazy getters for backward compatibility\nconst supabase = new Proxy({}, {\n    get (target, prop) {\n        return getSupabaseClient()[prop];\n    }\n});\nconst supabaseAdmin = new Proxy({}, {\n    get (target, prop) {\n        return getSupabaseAdminClient()[prop];\n    }\n});\n// Export the client directly for compatibility with utils/supabase.ts\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxRDtBQUdyRCx5Q0FBeUM7QUFDekMsSUFBSUMsWUFBbUM7QUFDdkMsSUFBSUMsaUJBQXdDO0FBRXJDLFNBQVNDO0lBQ2QsSUFBSSxDQUFDRixXQUFXO1FBQ2QsTUFBTUcsY0FBY0MsMENBQW9DO1FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO1FBRWpFLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxpQkFBaUI7WUFDcENFLFFBQVFDLElBQUksQ0FBQztZQUNiLCtDQUErQztZQUMvQyxPQUFPO2dCQUNMQyxNQUFNLElBQU87d0JBQ1hDLFFBQVEsSUFBTUMsUUFBUUMsT0FBTyxDQUFDO2dDQUFFQyxNQUFNLEVBQUU7Z0NBQUVDLE9BQU87NEJBQUs7d0JBQ3REQyxRQUFRLElBQU1KLFFBQVFDLE9BQU8sQ0FBQztnQ0FBRUMsTUFBTTtnQ0FBTUMsT0FBTztvQ0FBRUUsU0FBUztnQ0FBMEI7NEJBQUU7d0JBQzFGQyxRQUFRLElBQU1OLFFBQVFDLE9BQU8sQ0FBQztnQ0FBRUMsTUFBTTtnQ0FBTUMsT0FBTztvQ0FBRUUsU0FBUztnQ0FBMEI7NEJBQUU7d0JBQzFGRSxRQUFRLElBQU1QLFFBQVFDLE9BQU8sQ0FBQztnQ0FBRUMsTUFBTTtnQ0FBTUMsT0FBTztvQ0FBRUUsU0FBUztnQ0FBMEI7NEJBQUU7b0JBQzVGO1lBQ0Y7UUFDRjtRQUVBbEIsWUFBWUQsbUVBQVlBLENBQUNJLGFBQWFJO0lBQ3hDO0lBRUEsT0FBT1A7QUFDVDtBQUVPLFNBQVNxQjtJQUNkLElBQUksQ0FBQ3BCLGdCQUFnQjtRQUNuQixNQUFNRSxjQUFjQywwQ0FBb0M7UUFDeEQsTUFBTWtCLHlCQUF5QmxCLFFBQVFDLEdBQUcsQ0FBQ2tCLHlCQUF5QjtRQUVwRSxJQUFJLENBQUNwQixlQUFlLENBQUNtQix3QkFBd0I7WUFDM0NiLFFBQVFDLElBQUksQ0FBQztZQUNiLCtDQUErQztZQUMvQyxPQUFPO2dCQUNMQyxNQUFNLElBQU87d0JBQ1hDLFFBQVEsSUFBTUMsUUFBUUMsT0FBTyxDQUFDO2dDQUFFQyxNQUFNLEVBQUU7Z0NBQUVDLE9BQU87NEJBQUs7d0JBQ3REQyxRQUFRLElBQU1KLFFBQVFDLE9BQU8sQ0FBQztnQ0FBRUMsTUFBTTtnQ0FBTUMsT0FBTztvQ0FBRUUsU0FBUztnQ0FBMEI7NEJBQUU7d0JBQzFGQyxRQUFRLElBQU1OLFFBQVFDLE9BQU8sQ0FBQztnQ0FBRUMsTUFBTTtnQ0FBTUMsT0FBTztvQ0FBRUUsU0FBUztnQ0FBMEI7NEJBQUU7d0JBQzFGRSxRQUFRLElBQU1QLFFBQVFDLE9BQU8sQ0FBQztnQ0FBRUMsTUFBTTtnQ0FBTUMsT0FBTztvQ0FBRUUsU0FBUztnQ0FBMEI7NEJBQUU7b0JBQzVGO1lBQ0Y7UUFDRjtRQUVBakIsaUJBQWlCRixtRUFBWUEsQ0FBQ0ksYUFBYW1CO0lBQzdDO0lBRUEsT0FBT3JCO0FBQ1Q7QUFFQSxpREFBaUQ7QUFDMUMsTUFBTXVCLFdBQVcsSUFBSUMsTUFBTSxDQUFDLEdBQXFCO0lBQ3REQyxLQUFJQyxNQUFNLEVBQUVDLElBQUk7UUFDZCxPQUFPMUIsbUJBQW1CLENBQUMwQixLQUE2QjtJQUMxRDtBQUNGLEdBQUc7QUFFSSxNQUFNQyxnQkFBZ0IsSUFBSUosTUFBTSxDQUFDLEdBQXFCO0lBQzNEQyxLQUFJQyxNQUFNLEVBQUVDLElBQUk7UUFDZCxPQUFPUCx3QkFBd0IsQ0FBQ08sS0FBNkI7SUFDL0Q7QUFDRixHQUFHO0FBRUgsc0VBQXNFO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbHluY2JvdC1uZXh0anMvLi9saWIvc3VwYWJhc2UudHM/Yzk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgdHlwZSB7IFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vIENsaWVudCBpbnN0YW5jZXMgKGxhenkgaW5pdGlhbGl6YXRpb24pXHJcbmxldCBfc3VwYWJhc2U6IFN1cGFiYXNlQ2xpZW50IHwgbnVsbCA9IG51bGw7XHJcbmxldCBfc3VwYWJhc2VBZG1pbjogU3VwYWJhc2VDbGllbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBhYmFzZUNsaWVudCgpOiBTdXBhYmFzZUNsaWVudCB7XHJcbiAgaWYgKCFfc3VwYWJhc2UpIHtcclxuICAgIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG4gICAgY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG4gICAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIG5vdCBmb3VuZC4gUGxlYXNlIGNvbmZpZ3VyZSBTdXBhYmFzZSBpbnRlZ3JhdGlvbi4nKTtcclxuICAgICAgLy8gUmV0dXJuIGEgbW9jayBjbGllbnQgdGhhdCB3b24ndCBjYXVzZSBlcnJvcnNcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBmcm9tOiAoKSA9PiAoe1xyXG4gICAgICAgICAgc2VsZWN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSksXHJcbiAgICAgICAgICBpbnNlcnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGRhdGE6IG51bGwsIGVycm9yOiB7IG1lc3NhZ2U6ICdTdXBhYmFzZSBub3QgY29uZmlndXJlZCcgfSB9KSxcclxuICAgICAgICAgIHVwZGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogbnVsbCwgZXJyb3I6IHsgbWVzc2FnZTogJ1N1cGFiYXNlIG5vdCBjb25maWd1cmVkJyB9IH0pLFxyXG4gICAgICAgICAgZGVsZXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBudWxsLCBlcnJvcjogeyBtZXNzYWdlOiAnU3VwYWJhc2Ugbm90IGNvbmZpZ3VyZWQnIH0gfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9IGFzIGFueTtcclxuICAgIH1cclxuXHJcbiAgICBfc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBfc3VwYWJhc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBhYmFzZUFkbWluQ2xpZW50KCk6IFN1cGFiYXNlQ2xpZW50IHtcclxuICBpZiAoIV9zdXBhYmFzZUFkbWluKSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuICAgIGNvbnN0IHN1cGFiYXNlU2VydmljZVJvbGVLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xyXG5cclxuICAgIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlU2VydmljZVJvbGVLZXkpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdTdXBhYmFzZSBhZG1pbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgbm90IGZvdW5kLiBQbGVhc2UgY29uZmlndXJlIFN1cGFiYXNlIGludGVncmF0aW9uLicpO1xyXG4gICAgICAvLyBSZXR1cm4gYSBtb2NrIGNsaWVudCB0aGF0IHdvbid0IGNhdXNlIGVycm9yc1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGZyb206ICgpID0+ICh7XHJcbiAgICAgICAgICBzZWxlY3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9KSxcclxuICAgICAgICAgIGluc2VydDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogbnVsbCwgZXJyb3I6IHsgbWVzc2FnZTogJ1N1cGFiYXNlIG5vdCBjb25maWd1cmVkJyB9IH0pLFxyXG4gICAgICAgICAgdXBkYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBudWxsLCBlcnJvcjogeyBtZXNzYWdlOiAnU3VwYWJhc2Ugbm90IGNvbmZpZ3VyZWQnIH0gfSksXHJcbiAgICAgICAgICBkZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGRhdGE6IG51bGwsIGVycm9yOiB7IG1lc3NhZ2U6ICdTdXBhYmFzZSBub3QgY29uZmlndXJlZCcgfSB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gYXMgYW55O1xyXG4gICAgfVxyXG5cclxuICAgIF9zdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIF9zdXBhYmFzZUFkbWluO1xyXG59XHJcblxyXG4vLyBFeHBvcnQgbGF6eSBnZXR0ZXJzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IG5ldyBQcm94eSh7fSBhcyBTdXBhYmFzZUNsaWVudCwge1xyXG4gIGdldCh0YXJnZXQsIHByb3ApIHtcclxuICAgIHJldHVybiBnZXRTdXBhYmFzZUNsaWVudCgpW3Byb3AgYXMga2V5b2YgU3VwYWJhc2VDbGllbnRdO1xyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IG5ldyBQcm94eSh7fSBhcyBTdXBhYmFzZUNsaWVudCwge1xyXG4gIGdldCh0YXJnZXQsIHByb3ApIHtcclxuICAgIHJldHVybiBnZXRTdXBhYmFzZUFkbWluQ2xpZW50KClbcHJvcCBhcyBrZXlvZiBTdXBhYmFzZUNsaWVudF07XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEV4cG9ydCB0aGUgY2xpZW50IGRpcmVjdGx5IGZvciBjb21wYXRpYmlsaXR5IHdpdGggdXRpbHMvc3VwYWJhc2UudHNcclxuZXhwb3J0IHsgZ2V0U3VwYWJhc2VDbGllbnQgYXMgY3JlYXRlQ2xpZW50IH07Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIl9zdXBhYmFzZSIsIl9zdXBhYmFzZUFkbWluIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwiZnJvbSIsInNlbGVjdCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsImVycm9yIiwiaW5zZXJ0IiwibWVzc2FnZSIsInVwZGF0ZSIsImRlbGV0ZSIsImdldFN1cGFiYXNlQWRtaW5DbGllbnQiLCJzdXBhYmFzZVNlcnZpY2VSb2xlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsInN1cGFiYXNlIiwiUHJveHkiLCJnZXQiLCJ0YXJnZXQiLCJwcm9wIiwic3VwYWJhc2VBZG1pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/user/profile.ts":
/*!***********************************!*\
  !*** ./pages/api/user/profile.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/supabase */ \"(api)/./lib/supabase.ts\");\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key\";\nasync function handler(req, res) {\n    try {\n        // Get token from headers\n        const authHeader = req.headers.authorization;\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return res.status(401).json({\n                success: false,\n                error: \"No token provided\"\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        // Verify JWT token\n        let decoded;\n        try {\n            decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        } catch (jwtError) {\n            return res.status(401).json({\n                success: false,\n                error: \"Invalid token\"\n            });\n        }\n        if (req.method === \"GET\") {\n            // Get user profile\n            const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getSupabaseAdminClient)();\n            const { data: user, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", decoded.id).single();\n            if (error || !user) {\n                return res.status(404).json({\n                    success: false,\n                    error: \"User not found\"\n                });\n            }\n            // Return safe user data\n            const safeUser = {\n                id: user.id,\n                email: user.email,\n                first_name: user.first_name,\n                last_name: user.last_name,\n                company: user.company,\n                role: user.role,\n                subscription: user.subscription || {\n                    plan: \"free\",\n                    status: \"inactive\"\n                },\n                unipile_account_id: user.linkedin_accounts?.[0]?.unipile_account_id,\n                linkedin_accounts: (user.linkedin_accounts || []).map((account)=>({\n                        email: account.email,\n                        isActive: account.isActive || false,\n                        hasPassword: !!account.encryptedPassword,\n                        unipile_account_id: account.unipile_account_id\n                    })),\n                email_accounts: (user.email_accounts || []).map((account)=>({\n                        email: account.email,\n                        provider: account.provider,\n                        isActive: account.isActive || false\n                    })),\n                api_keys: {\n                    openai: user.api_keys?.encryptedOpenAI ? \"********\" : undefined,\n                    perplexity: user.api_keys?.encryptedPerplexity ? \"********\" : undefined,\n                    claude: user.api_keys?.encryptedClaude ? \"********\" : undefined\n                },\n                settings: user.settings || {\n                    timezone: \"UTC\",\n                    notifications: {\n                        email: true,\n                        webhook: false\n                    }\n                }\n            };\n            return res.json({\n                success: true,\n                user: safeUser\n            });\n        } else if (req.method === \"PUT\") {\n            // Update user profile\n            const { first_name, last_name, company } = req.body;\n            if (!first_name || !last_name) {\n                return res.status(400).json({\n                    success: false,\n                    error: \"First name and last name are required\"\n                });\n            }\n            const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getSupabaseAdminClient)();\n            const { data: updatedUser, error } = await supabase.from(\"users\").update({\n                first_name: first_name.trim(),\n                last_name: last_name.trim(),\n                company: company ? company.trim() : null\n            }).eq(\"id\", decoded.id).select().single();\n            if (error) {\n                return res.status(500).json({\n                    success: false,\n                    error: \"Failed to update profile\"\n                });\n            }\n            // Generate new JWT token\n            const newToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n                id: updatedUser.id,\n                email: updatedUser.email,\n                role: updatedUser.role,\n                firstName: updatedUser.first_name,\n                lastName: updatedUser.last_name,\n                onboardingComplete: updatedUser.onboarding_complete,\n                emailVerified: updatedUser.email_verified,\n                subscription: updatedUser.subscription\n            }, JWT_SECRET, {\n                expiresIn: \"30d\"\n            });\n            return res.json({\n                success: true,\n                message: \"Profile updated successfully\",\n                user: updatedUser,\n                token: newToken\n            });\n        } else {\n            res.setHeader(\"Allow\", [\n                \"GET\",\n                \"PUT\"\n            ]);\n            return res.status(405).json({\n                success: false,\n                error: `Method ${req.method} not allowed`\n            });\n        }\n    } catch (error) {\n        console.error(\"Profile API error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBWTtZQUN4QyxHQUNBbEMsWUFDQTtnQkFBRXFFLFdBQVc7WUFBTTtZQUdyQixPQUFPaEUsSUFBSU0sSUFBSSxDQUFDO2dCQUNkQyxTQUFTO2dCQUNUMEQsU0FBUztnQkFDVGhELE1BQU1vQztnQkFDTjVDLE9BQU8rQztZQUNUO1FBRUYsT0FBTztZQUNMeEQsSUFBSWtFLFNBQVMsQ0FBQyxTQUFTO2dCQUFDO2dCQUFPO2FBQU07WUFDckMsT0FBT2xFLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUQyxPQUFPLENBQUMsT0FBTyxFQUFFVCxJQUFJZSxNQUFNLENBQUMsWUFBWSxDQUFDO1lBQzNDO1FBQ0Y7SUFFRixFQUFFLE9BQU9OLE9BQU87UUFDZDJELFFBQVEzRCxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPUixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU87UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9seW5jYm90LW5leHRqcy8uL3BhZ2VzL2FwaS91c2VyL3Byb2ZpbGUudHM/NGUyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IHsgZ2V0U3VwYWJhc2VBZG1pbkNsaWVudCB9IGZyb20gJy4uLy4uLy4uL2xpYi9zdXBhYmFzZSc7XHJcblxyXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zZWNyZXQta2V5JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICB0cnkge1xyXG4gICAgLy8gR2V0IHRva2VuIGZyb20gaGVhZGVyc1xyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdObyB0b2tlbiBwcm92aWRlZCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgICBcclxuICAgIC8vIFZlcmlmeSBKV1QgdG9rZW5cclxuICAgIGxldCBkZWNvZGVkO1xyXG4gICAgdHJ5IHtcclxuICAgICAgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIGFueTtcclxuICAgIH0gY2F0Y2ggKGp3dEVycm9yKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHRva2VuJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgLy8gR2V0IHVzZXIgcHJvZmlsZVxyXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW5DbGllbnQoKTtcclxuICAgICAgY29uc3QgeyBkYXRhOiB1c2VyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgnaWQnLCBkZWNvZGVkLmlkKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChlcnJvciB8fCAhdXNlcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnVXNlciBub3QgZm91bmQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJldHVybiBzYWZlIHVzZXIgZGF0YVxyXG4gICAgICBjb25zdCBzYWZlVXNlciA9IHtcclxuICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBmaXJzdF9uYW1lOiB1c2VyLmZpcnN0X25hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyLmxhc3RfbmFtZSxcclxuICAgICAgICBjb21wYW55OiB1c2VyLmNvbXBhbnksXHJcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgIHN1YnNjcmlwdGlvbjogdXNlci5zdWJzY3JpcHRpb24gfHwgeyBwbGFuOiAnZnJlZScsIHN0YXR1czogJ2luYWN0aXZlJyB9LFxyXG4gICAgICAgIHVuaXBpbGVfYWNjb3VudF9pZDogdXNlci5saW5rZWRpbl9hY2NvdW50cz8uWzBdPy51bmlwaWxlX2FjY291bnRfaWQsXHJcbiAgICAgICAgbGlua2VkaW5fYWNjb3VudHM6ICh1c2VyLmxpbmtlZGluX2FjY291bnRzIHx8IFtdKS5tYXAoKGFjY291bnQ6IGFueSkgPT4gKHtcclxuICAgICAgICAgIGVtYWlsOiBhY2NvdW50LmVtYWlsLFxyXG4gICAgICAgICAgaXNBY3RpdmU6IGFjY291bnQuaXNBY3RpdmUgfHwgZmFsc2UsXHJcbiAgICAgICAgICBoYXNQYXNzd29yZDogISFhY2NvdW50LmVuY3J5cHRlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgdW5pcGlsZV9hY2NvdW50X2lkOiBhY2NvdW50LnVuaXBpbGVfYWNjb3VudF9pZFxyXG4gICAgICAgIH0pKSxcclxuICAgICAgICBlbWFpbF9hY2NvdW50czogKHVzZXIuZW1haWxfYWNjb3VudHMgfHwgW10pLm1hcCgoYWNjb3VudDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgZW1haWw6IGFjY291bnQuZW1haWwsXHJcbiAgICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlcixcclxuICAgICAgICAgIGlzQWN0aXZlOiBhY2NvdW50LmlzQWN0aXZlIHx8IGZhbHNlXHJcbiAgICAgICAgfSkpLFxyXG4gICAgICAgIGFwaV9rZXlzOiB7XHJcbiAgICAgICAgICBvcGVuYWk6IHVzZXIuYXBpX2tleXM/LmVuY3J5cHRlZE9wZW5BSSA/ICcqKioqKioqKicgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBwZXJwbGV4aXR5OiB1c2VyLmFwaV9rZXlzPy5lbmNyeXB0ZWRQZXJwbGV4aXR5ID8gJyoqKioqKioqJyA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIGNsYXVkZTogdXNlci5hcGlfa2V5cz8uZW5jcnlwdGVkQ2xhdWRlID8gJyoqKioqKioqJyA6IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dGluZ3M6IHVzZXIuc2V0dGluZ3MgfHwge1xyXG4gICAgICAgICAgdGltZXpvbmU6ICdVVEMnLFxyXG4gICAgICAgICAgbm90aWZpY2F0aW9uczoge1xyXG4gICAgICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICAgICAgd2ViaG9vazogZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gcmVzLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgdXNlcjogc2FmZVVzZXJcclxuICAgICAgfSk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnUFVUJykge1xyXG4gICAgICAvLyBVcGRhdGUgdXNlciBwcm9maWxlXHJcbiAgICAgIGNvbnN0IHsgZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBjb21wYW55IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGlmICghZmlyc3RfbmFtZSB8fCAhbGFzdF9uYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6ICdGaXJzdCBuYW1lIGFuZCBsYXN0IG5hbWUgYXJlIHJlcXVpcmVkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW5DbGllbnQoKTtcclxuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkVXNlciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgICAudXBkYXRlKHtcclxuICAgICAgICAgIGZpcnN0X25hbWU6IGZpcnN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgICAgbGFzdF9uYW1lOiBsYXN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgICAgY29tcGFueTogY29tcGFueSA/IGNvbXBhbnkudHJpbSgpIDogbnVsbFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVxKCdpZCcsIGRlY29kZWQuaWQpXHJcbiAgICAgICAgLnNlbGVjdCgpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdlbmVyYXRlIG5ldyBKV1QgdG9rZW5cclxuICAgICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgaWQ6IHVwZGF0ZWRVc2VyLmlkLCBcclxuICAgICAgICAgIGVtYWlsOiB1cGRhdGVkVXNlci5lbWFpbCwgXHJcbiAgICAgICAgICByb2xlOiB1cGRhdGVkVXNlci5yb2xlLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB1cGRhdGVkVXNlci5maXJzdF9uYW1lLFxyXG4gICAgICAgICAgbGFzdE5hbWU6IHVwZGF0ZWRVc2VyLmxhc3RfbmFtZSxcclxuICAgICAgICAgIG9uYm9hcmRpbmdDb21wbGV0ZTogdXBkYXRlZFVzZXIub25ib2FyZGluZ19jb21wbGV0ZSxcclxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHVwZGF0ZWRVc2VyLmVtYWlsX3ZlcmlmaWVkLFxyXG4gICAgICAgICAgc3Vic2NyaXB0aW9uOiB1cGRhdGVkVXNlci5zdWJzY3JpcHRpb25cclxuICAgICAgICB9LFxyXG4gICAgICAgIEpXVF9TRUNSRVQsXHJcbiAgICAgICAgeyBleHBpcmVzSW46ICczMGQnIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgICAgdXNlcjogdXBkYXRlZFVzZXIsXHJcbiAgICAgICAgdG9rZW46IG5ld1Rva2VuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnLCAnUFVUJ10pO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gbm90IGFsbG93ZWRgXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUHJvZmlsZSBBUEkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImp3dCIsImdldFN1cGFiYXNlQWRtaW5DbGllbnQiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInRva2VuIiwicmVwbGFjZSIsImRlY29kZWQiLCJ2ZXJpZnkiLCJqd3RFcnJvciIsIm1ldGhvZCIsInN1cGFiYXNlIiwiZGF0YSIsInVzZXIiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsInNhZmVVc2VyIiwiZW1haWwiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiY29tcGFueSIsInJvbGUiLCJzdWJzY3JpcHRpb24iLCJwbGFuIiwidW5pcGlsZV9hY2NvdW50X2lkIiwibGlua2VkaW5fYWNjb3VudHMiLCJtYXAiLCJhY2NvdW50IiwiaXNBY3RpdmUiLCJoYXNQYXNzd29yZCIsImVuY3J5cHRlZFBhc3N3b3JkIiwiZW1haWxfYWNjb3VudHMiLCJwcm92aWRlciIsImFwaV9rZXlzIiwib3BlbmFpIiwiZW5jcnlwdGVkT3BlbkFJIiwidW5kZWZpbmVkIiwicGVycGxleGl0eSIsImVuY3J5cHRlZFBlcnBsZXhpdHkiLCJjbGF1ZGUiLCJlbmNyeXB0ZWRDbGF1ZGUiLCJzZXR0aW5ncyIsInRpbWV6b25lIiwibm90aWZpY2F0aW9ucyIsIndlYmhvb2siLCJib2R5IiwidXBkYXRlZFVzZXIiLCJ1cGRhdGUiLCJ0cmltIiwibmV3VG9rZW4iLCJzaWduIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJvbmJvYXJkaW5nQ29tcGxldGUiLCJvbmJvYXJkaW5nX2NvbXBsZXRlIiwiZW1haWxWZXJpZmllZCIsImVtYWlsX3ZlcmlmaWVkIiwiZXhwaXJlc0luIiwibWVzc2FnZSIsInNldEhlYWRlciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/profile.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fprofile&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cprofile.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();